<template>
	<lightning-card title={cardTitle} icon-name="standard:location">
		<template if:true={recordHasLocation}>
			<lightning-layout horizontal-align="space" class="slds-var-p-horizontal_medium slds-var-p-bottom_medium">
				<lightning-layout-item size="4" padding="horizontal-small">
					<lightning-input
						type="number"
						label="Distance:"
						value={distance}
						step=".01"
						onchange={handleChangeDistance}
					></lightning-input>
				</lightning-layout-item>
				<lightning-layout-item size="4" padding="horizontal-small">
					<lightning-radio-group
						type="button"
						label="Units:"
						options={unitOptions}
						value={units}
						onchange={handleChangeUnits}
					></lightning-radio-group>
				</lightning-layout-item>
			</lightning-layout>
			<section class="slds-var-p-horizontal_medium">
				<lightning-map
					map-markers={markers}
					center={center}
					zoom-level={initialZoomLevel}
					list-view="hidden"
					options={mapOptions}
				></lightning-map>
			</section>
			<p class="slds-var-p-horizontal_medium slds-var-p-top_medium">
				A total of&nbsp;
				<strong>
					<lightning-formatted-number value={tableRows}></lightning-formatted-number>
				</strong>
				&nbsp;records have been found within&nbsp;
				<lightning-formatted-number value={distance}></lightning-formatted-number>&nbsp;
				<lightning-formatted-text value={units}></lightning-formatted-text>
				:
			</p>
			<template if:true={showDataTable}>
				<section class="slds-var-p-around_medium">
					<div class="slds-scrollable scroller-size">
						<lightning-datatable data={tableData} columns={columns} key-field="recordId" hide-checkbox-column="true">
						</lightning-datatable>
					</div>
				</section>
			</template>
		</template>
		<template if:false={recordHasLocation}>
			<p class="slds-var-p-around_medium">
				This record has no valid geolocation data, so no nearby records can be determined.
			</p>
		</template>
	</lightning-card>
</template>
